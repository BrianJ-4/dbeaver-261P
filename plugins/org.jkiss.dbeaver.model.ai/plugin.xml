<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>

<plugin>
    <extension-point id="com.dbeaver.ai.engine" name="AI integrations" schema="schema/com.dbeaver.ai.engine.exsd"/>
    <extension-point id="com.dbeaver.ai.sql.formatter" name="AI SQL formatters" schema="schema/com.dbeaver.ai.sql.formatter.exsd"/>
    <extension-point id="com.dbeaver.ai.schema.generator" name="AI Schema generators" schema="schema/com.dbeaver.ai.schema.generator.exsd"/>
    <extension-point id="com.dbeaver.ai.assistant" name="AI assistants" schema="schema/com.dbeaver.ai.assistant.exsd"/>
    <extension-point id="com.dbeaver.ai.engine.settingsSerDe" name="AI engine settings serde" schema="schema/com.dbeaver.ai.engine.settingsSerDe.exsd"/>

    <extension point="com.dbeaver.ai.engine">
        <completionEngine id="openai" label="OpenAI" class="org.jkiss.dbeaver.model.ai.engine.openai.OpenAIEngineFactory" default="true">
            <propertyGroup label="Engine settings">
                <property id="gpt.token" label="API token" type="string" hint="Copy-paste API token from https://platform.openai.com/account/api-keys" features="password"/>
                <property id="gpt.model" label="Model" type="string" validValues="gpt-3.5-turbo,gpt-3.5-turbo-instruct,gpt-4,gpt-4o,gpt-4-turbo,gpt-4o-mini" defaultValue="gpt-4o"/>
                <property id="gpt.model.temperature" label="Temperature" type="integer" hint="Lower temperatures give more precise results"/>
                <property id="gpt.log.query" label="Write AI queries to debug log" type="boolean" hint="Write GPT queries with metadata info in debug logs"/>
                <property id="gpt.contextWindowSize" label="Context window size" type="integer"/>
            </propertyGroup>
        </completionEngine>
        <completionEngine id="copilot" label="Github Copilot" class="org.jkiss.dbeaver.model.ai.engine.copilot.CopilotFactory">
            <propertyGroup label="Engine settings">
                <property id="copilot.access.token" label="Copilot Access Token" type="string" hint="OAuth token for Copilot(Acquired manually for now)" features="password"/>
                <property id="gpt.model.temperature" label="Temperature" type="integer" hint="Lower temperatures give more precise results"/>
                <property id="gpt.model" label="Model" type="string" validValues="gpt-3.5-turbo,gpt-4" defaultValue="gpt-3.5-turbo"/>
                <property id="gpt.log.query" label="Write AI queries to debug log" type="boolean" hint="Write GPT queries with metadata info in debug logs"/>
                <property id="gpt.contextWindowSize" label="Context window size" type="integer"/>
            </propertyGroup>
        </completionEngine>
    </extension>

    <extension point="com.dbeaver.ai.engine.settingsSerDe">
        <serde id="openai" class="org.jkiss.dbeaver.model.ai.engine.openai.OpenAISettingsSerDe"/>
        <serde id="copilot" class="org.jkiss.dbeaver.model.ai.engine.copilot.CopilotSettingsSerDe"/>
    </extension>

    <extension point="com.dbeaver.ai.sql.formatter">
        <formatter id="core" class="org.jkiss.dbeaver.model.ai.impl.AISqlFormatterImpl"/>
    </extension>

    <extension point="com.dbeaver.ai.schema.generator">
        <generator id="core" class="org.jkiss.dbeaver.model.ai.impl.AISchemaGeneratorImpl"/>
    </extension>

    <extension point="org.jkiss.dbeaver.sqlCommand">
        <command id="ai" class="org.jkiss.dbeaver.model.ai.commands.SQLCommandAI" label="Execute prompt" description="Execute quary in human language by using AI translator"/>
    </extension>

</plugin>
